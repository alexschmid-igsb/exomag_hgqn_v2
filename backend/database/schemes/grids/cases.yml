---
scheme:
    _id:
        type: UUID
        required: true
    internalCaseId:
        type: string
        required: true
    sequencingLab:
        #type: string
        type: UUID
        reference: STATIC_labs
        required: true
    externalCaseId:
        type: string
    gestaltMatcherId:
        type: string
    face2GeneId:
        type: string
    sex:
        type: string
        enum: 
          - male
          - female
          - ambigous
    hpoTerms:
      - type: string
    singleDuoTrio:
        type: string
        enum: 
          - single
          - duo
          - trio
          - '>3'
    caseStatus:
        type: string
        enum:
          - solved
          - partially solved
          - unclear
          - unsolved
    testConducted:
        type: string
        enum:
          - Panel
          - Exome
          - Genome
          - array
    selektivvertrag:
        type: string
        enum: 
          - ja
          - nein
          - beantragt
          - unbekannt
    diseaseCategory:
        type: string
        enum:
          - neurodevelopmental
          - neurological/neuromuscular
          - organ abnormality
          - haematopoiesis/immune system
          - endocrine
          - metabolic
          - mitochondrial nutritional
          - cardiovascular
          - other
    referringClinician:
        type: string
    bisherigeDiagnostik:
        type: string
    wetlabMetainfo:
        type: string
    AutoCasc:
        type: string
    prenatal:
        type: integer
    ageInMonths:
        type: decimal
    ageinYears:
        type: decimal
    autozygosity:
        type: decimal
        # todo: range
    dateOfBirth:
        type: date
    startDerDiagnostik:
        type: date
    befunddatum:
        type: date
    changesInManagementOrTherapyAfterTest:
        type: string
    secondaryOrIncidentalFindings:
        type: string
    relevantFindingsForResearch:
        type: string
    kommentar:
        type: string
    variants:
      - gene:
            type: string
        variantSolvesCase:
            type: string
            enum:
              - primary
              - incidental
              - candidate
        ifNewDiseaseGeneLevelOfEvidence:
            type: string
        acmg:
            class:
                type: string
                enum:
                  - pathogenic
                  - likely pathogenic
                  - unclear
                  - likely benign
                  - benign
            criteria:
              - type: string
                enum:
                  - PVS1
                  - PS1
                  - PS2
                  - PS3
                  - PS4
                  - PM1
                  - PM2
                  - PM3
                  - PM4
                  - PM5
                  - PM6
                  - PP1
                  - PP2
                  - PP3
                  - PP4
                  - PP5
                  - BA1
                  - BS1
                  - BS2
                  - BS3
                  - BS4
                  - BP1
                  - BP2
                  - BP3
                  - BP4
                  - BP5
                  - BP6
                  - BP7
        zygosity:
            type: string
            enum:
              - heterozygous
              - homozygous
              - comp het
              - hemi
              - homoplasmic
              - heteroplasmic
        segregationsanalyse:
            type: string
            enum:
              - not performed
              - de novo
              - transmitted from father
              - transmitted from mother
        modeOfInheritance:
            type: string
            enum:
              - dominant
              - recessive
              - X-linked
              - mitochondrial
              - unclear
        pubMedId:
            type: string
        clinvarAccessionId:
            type: string
        variant:
            reference:
                type: string
                reference: GRID_variants
            transcript:
                type: string
layouts:
    default:
        populate:  
          - path: sequencingLab
            # select: ewf
          - path: variants.variant.reference
            # select: wef
        description:
          - label: Identifikation
            type: 
                id: primary
            fields:
              - id: id_COLUMN
                path: _id
                label: ID
                importTarget: false
              - id: sequencingLab_COLUMN
                path: sequencingLab.shortName
                label: Sequencing Lab
                majorField: true
                importTarget: false
                pinned: true
              - id: internalCaseId_COLUMN
                path: internalCaseId
                label: Internal Case ID
                majorField: true
                importTarget: true
                importMappingRequired: true
                pinned: true
          - label: Externe IDs
            type: 
                id: primary
            fields:
              - id: gestaltMatcherId_COLUMN
                path: gestaltMatcherId
                label: GestaltMatcher ID
                majorField: true
                importTarget: true
              - id: externalCaseId_COLUMN
                path: externalCaseId
                label: External Case ID
                importTarget: true
              - id: face2GeneId_COLUMN
                path: face2GeneId
                label: Face2Gene ID
                importTarget: true
          - label: Patient
            type: 
                id: primary
            fields:
              - id: sex_COLUMN
                path: sex
                label: Sex
                majorField: true
                importTarget: true
              - id: ageInMonths_COLUMN
                path: ageInMonths
                label: Age (in months)
                majorField: true
                importTarget: true
              - id: ageinYears_COLUMN
                path: ageinYears
                label: Age (in years)
                majorField: true
                importTarget: true
              - id: prenatal_COLUMN
                path: prenatal
                label: Prenatal
                importTarget: true
              - id: dateOfBirth_COLUMN
                path: dateOfBirth
                label: Date of Birth
                importTarget: true
          - label: Diagnostik
            type: 
                id: primary
            fields:
              - id: startDerDiagnostik_COLUMN
                path: startDerDiagnostik
                label: Start der Diagnostik
                majorField: true
                importTarget: true
              - id: befunddatum_COLUMN
                path: befunddatum
                label: Befunddatum
                majorField: true
                importTarget: true
              - id: diseaseCategory_COLUMN
                path: diseaseCategory
                label: Disease Category
                majorField: true
                importTarget: true
              - id: caseStatus_COLUMN
                path: caseStatus
                label: Case Status
                majorField: true
                importTarget: true
              - id: hpoTerms_COLUMN
                path: hpoTerms
                label: HPO Terms
                importTarget: true
              - id: bisherigeDiagnostik_COLUMN
                path: bisherigeDiagnostik
                label: Bisherige Diagnostik
                importTarget: true
              - id: singleDuoTrio_COLUMN
                path: singleDuoTrio
                label: Single / Duo / Trio
                importTarget: true
              - id: referringClinician_COLUMN
                path: referringClinician
                label: Referring Clinician
                importTarget: true
              - id: autozygosity_COLUMN
                path: autozygosity
                label: Autozygosity
                importTarget: true
              - id: testConducted_COLUMN
                path: testConducted
                label: Test Conducted
                importTarget: true
              - id: selektivvertrag_COLUMN
                path: selektivvertrag
                label: Selectivvertrag
                importTarget: true
              - id: wetlabMetainfo_COLUMN
                path: wetlabMetainfo
                label: Wetlab Metainfo
                importTarget: true
              - id: AutoCasc_COLUMN
                path: AutoCasc
                label: AutoCasc
                importTarget: true
          - label: Klinische Interpretation
            type: 
                id: nested
                rowExpansion: true
                root: variants
            fields:
              - id: gene_COLUMN
                path: gene
                label: Gene
                importTarget: true
              - id: variantSolvesCase_COLUMN
                path: gene
                label: Variant solves case
                importTarget: true
              - id: ifNewDiseaseGeneLevelOfEvidence_COLUMN
                path: ifNewDiseaseGeneLevelOfEvidence
                label: Level of Evidence (for new disease genes)
                importTarget: true
              - id: acmgClass_COLUMN
                path: acmg.class
                label: ACMG Class
                importTarget: true
              - id: acmgCriteria_COLUMN
                path: acmg.criteria
                label: ACMG Criteria
                importTarget: true
              - id: zygosity_COLUMN
                path: zygosity
                label: Zygosity
                importTarget: true
              - id: segregationsanalyse_COLUMN
                path: segregationsanalyse
                label: Segregationsanalyse
                importTarget: true
              - id: modeOfInheritance_COLUMN
                path: modeOfInheritance
                label: Mode of Inheritance
                importTarget: true
            #   - id: blabla_COLUMN
            #     path: variant.GRCh38
            #     label: bla1
            #     importTarget: true
              - id: blabla2_COLUMN
                path: variant.reference._id
                label: bla2
              - id: blabla3_COLUMN
                path: variant.reference.GRCh37.gDNA
                label: bla3
              - id: blabla4_COLUMN
                path: variant.reference.GRCh37
                label: bla4

#          - label: Variante
#            type: 
#                id: nested
#                rowExpansion: true
#                root: variants
#            fields:
#              - id: bla
#                label: Dings
#                path: variant.reference.GRCh37.gDNA
#              - id: test
#                label: Neu
#                path: variant.reference.GRCh37
