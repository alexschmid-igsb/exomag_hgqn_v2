---
scheme:
    _id:
        type: UUID
        required: true
    internalCaseId:
        type: string
        required: true
    sequencingLab:
        #type: string
        type: UUID
        reference: STATIC_labs
        required: true
    externalCaseId:
        type: string
    gestaltMatcherId:
        type: string
    face2GeneId:
        type: string
    sex:
        type: string
        enum: 
          - male
          - female
          - ambigous
    hpoTerms:
      - type: string
    singleDuoTrio:
        type: string
        enum: 
          - single
          - duo
          - trio
          - '>3'
    caseStatus:
        type: string
        enum:
          - solved
          - partially solved
          - unclear
          - unsolved
    testConducted:
        type: string
        enum:
          - Panel
          - Exome
          - Genome
          - array
    selektivvertrag:
        type: string
        enum: 
          - ja
          - nein
          - beantragt
          - unbekannt
    diseaseCategory:
        type: string
        enum:
          - neurodevelopmental
          - neurological/neuromuscular
          - organ abnormality
          - haematopoiesis/immune system
          - endocrine
          - metabolic
          - mitochondrial nutritional
          - cardiovascular
          - other
    referringClinician:
        type: string
    bisherigeDiagnostik:
        type: string
    wetlabMetainfo:
        type: string
    AutoCasc:
        type: string
    prenatal:
        type: integer
    ageInMonths:
        type: decimal
    ageinYears:
        type: decimal
    autozygosity:
        type: decimal
        # todo: range
    dateOfBirth:
        type: date
    startDerDiagnostik:
        type: date
    befunddatum:
        type: date
    changesInManagementOrTherapyAfterTest:
        type: string
    secondaryOrIncidentalFindings:
        type: string
    relevantFindingsForResearch:
        type: string
    kommentar:
        type: string
    variants:
      - gene:
            type: string
        variantSolvesCase:
            type: string
            enum:
              - primary
              - incidental
              - candidate
        ifNewDiseaseGeneLevelOfEvidence:
            type: string
        acmg:
            class:
                type: string
                enum:
                  - pathogenic
                  - likely pathogenic
                  - unclear
                  - likely benign
                  - benign
            criteria:
              - type: string
                enum:
                  - PVS1
                  - PS1
                  - PS2
                  - PS3
                  - PS4
                  - PM1
                  - PM2
                  - PM3
                  - PM4
                  - PM5
                  - PM6
                  - PP1
                  - PP2
                  - PP3
                  - PP4
                  - PP5
                  - BA1
                  - BS1
                  - BS2
                  - BS3
                  - BS4
                  - BP1
                  - BP2
                  - BP3
                  - BP4
                  - BP5
                  - BP6
                  - BP7
        zygosity:
            type: string
            enum:
              - heterozygous
              - homozygous
              - comp het
              - hemi
              - homoplasmic
              - heteroplasmic
        segregationsanalyse:
            type: string
            enum:
              - not performed
              - de novo
              - transmitted from father
              - transmitted from mother
        modeOfInheritance:
            type: string
            enum:
              - dominant
              - recessive
              - X-linked
              - mitochondrial
              - unclear
        pubMedId:
            type: string
        clinvarAccessionId:
            type: string
        variant:
            reference:
                type: string
                reference: GRID_variants
            transcript:
                type: string
layouts:
    default:
        populate:  
          - path: sequencingLab
            # select: ewf
          - path: variants.variant.reference
            # select: wef
        description:
          - label: Identifikation
            type: 
                id: primary
            fields:
              - id: COLUMN_ID
                path: _id
                label: ID
                importTarget: false
              - id: COLUMN_sequencingLab
                path: sequencingLab.shortName
                label: Sequencing Lab
                majorField: true
                importTarget: false
                pinned: true
              - id: COLUMN_internalCaseId
                path: internalCaseId
                label: Internal Case ID
                majorField: true
                importTarget: true
                importMappingRequired: true
                pinned: true
          - label: Externe IDs
            type: 
                id: primary
            fields:
              - id: COLUMN_gestaltMatcherId
                path: gestaltMatcherId
                label: GestaltMatcher ID
                majorField: true
                importTarget: true
              - id: COLUMN_externalCaseId
                path: externalCaseId
                label: External Case ID
                importTarget: true
              - id: COLUMN_face2GeneId
                path: face2GeneId
                label: Face2Gene ID
                importTarget: true
          - label: Patient
            type: 
                id: primary
            fields:
              - id: COLUMN_sex
                path: sex
                label: Sex
                majorField: true
                importTarget: true
              - id: COLUMN_ageInMonths
                path: ageInMonths
                label: Age (in months)
                majorField: true
                importTarget: true
              - id: COLUMN_ageinYears
                path: ageinYears
                label: Age (in years)
                majorField: true
                importTarget: true
              - id: COLUMN_prenatal
                path: prenatal
                label: Prenatal
                importTarget: true
              - id: COLUMN_dateOfBirth
                path: dateOfBirth
                label: Date of Birth
                importTarget: true
          - label: Diagnostik
            type: 
                id: primary
            fields:
              - id: COLUMN_startDerDiagnostik
                path: startDerDiagnostik
                label: Start der Diagnostik
                majorField: true
                importTarget: true
              - id: COLUMN_befunddatum
                path: befunddatum
                label: Befunddatum
                majorField: true
                importTarget: true
              - id: COLUMN_diseaseCategory
                path: diseaseCategory
                label: Disease Category
                majorField: true
                importTarget: true
              - id: COLUMN_caseStatus
                path: caseStatus
                label: Case Status
                majorField: true
                importTarget: true
              - id: COLUMN_hpoTerms
                path: hpoTerms
                label: HPO Terms
                importTarget: true
              - id: COLUMN_bisherigeDiagnostik
                path: bisherigeDiagnostik
                label: Bisherige Diagnostik
                importTarget: true
              - id: COLUMN_singleDuoTrio
                path: singleDuoTrio
                label: Single / Duo / Trio
                importTarget: true
              - id: COLUMN_referringClinician
                path: referringClinician
                label: Referring Clinician
                importTarget: true
              - id: COLUMN_autozygosity
                path: autozygosity
                label: Autozygosity
                importTarget: true
              - id: COLUMN_testConducted
                path: testConducted
                label: Test Conducted
                importTarget: true
              - id: COLUMN_changesInManagementOrTherapyAfterTest
                path: changesInManagementOrTherapyAfterTest
                label: Changes in Management / Therapy after Test
                importTarget: true
              - id: COLUMN_secondaryOrIncidentalFindings
                path: secondaryOrIncidentalFindings
                label: Secondary or incidental Findings
                importTarget: true
              - id: COLUMN_relevantFindingsForResearch
                path: relevantFindingsForResearch
                label: Relevant findings for research
                importTarget: true
              - id: COLUMN_selektivvertrag
                path: selektivvertrag
                label: Selektivvertrag
                importTarget: true
              - id: COLUMN_wetlabMetainfo
                path: wetlabMetainfo
                label: Wetlab Metainfo
                importTarget: true
              - id: COLUMN_AutoCasc
                path: AutoCasc
                label: AutoCasc
                importTarget: true
              - id: COLUMN_kommentar
                path: kommentar
                label: Kommentar
                importTarget: true
          - label: Klinische Interpretation
            type: 
                id: nested
                rowExpansion: true
                root: variants
            fields:
              - id: COLUMN_gene
                path: gene
                label: Gene
                importTarget: true
              - id: COLUMN_variantSolvesCase
                path: variantSolvesCase
                label: Variant solves case
                importTarget: true
              - id: COLUMN_ifNewDiseaseGeneLevelOfEvidence
                path: ifNewDiseaseGeneLevelOfEvidence
                label: Level of Evidence (for new disease genes)
                importTarget: true
              - id: COLUMN_acmgClass
                path: acmg.class
                label: ACMG Class
                importTarget: true
              - id: COLUMN_acmgCriteria
                path: acmg.criteria
                label: ACMG Criteria
                importTarget: true
              - id: COLUMN_zygosity
                path: zygosity
                label: Zygosity
                importTarget: true
              - id: COLUMN_segregationsanalyse
                path: segregationsanalyse
                label: Segregationsanalyse
                importTarget: true
              - id: COLUMN_modeOfInheritance
                path: modeOfInheritance
                label: Mode of Inheritance
                importTarget: true
              - id: COLUMN_pubMedId
                path: pubMedId
                label: PubMed ID
                importTarget: true
              - id: COLUMN_clinvarAccessionId
                path: clinvarAccessionId
                label: Clinvar Accession ID
                importTarget: true
          - label: Variante
            type: 
                id: nested
                rowExpansion: true
                root: variants
            fields:
              - id: COLUMN_variantId
                label: ID
                path: variant.reference._id
              - id: COLUMN_cDNA
                label: HGVS cDNA
                path: variant.transcript
              - id: COLUMN_gDNA_GRCh38
                label: HGVS gDNA (GRCh38)
                path: variant.reference.GRCh38.gDNA
              - id: COLUMN_genomic_position_GRCh38
                label: Genomic Position (GRCh38)
                path: variant.reference.GRCh38
                customValueRenderer: gen_pos_renderer
              - id: COLUMN_gDNA_GRCh37
                label: HGVS gDNA (GRCh37)
                path: variant.reference.GRCh37.gDNA
              - id: COLUMN_genomic_position_GRCh37
                label: Genomic Position (GRCh37)
                path: variant.reference.GRCh37
                customValueRenderer: gen_pos_renderer
