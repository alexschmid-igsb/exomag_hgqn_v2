---
scheme:
    _id:
        type: UUID
        required: true
    internalCaseId:
        type: string
        required: true
    sequencingLab:
        #type: string
        type: UUID
        ref: STATIC_labs
        required: true
    externalCaseId:
        type: string
    gestaltMatcherId:
        type: string
    face2GeneId:
        type: string
    sex:
        type: string
        enum: 
          - male
          - female
          - ambigous
    hpoTerms:
        type: string
    singleDuoTrio:
        type: string
        enum: 
          - single
          - duo
          - trio
          - '>3'
    caseStatus:
        type: string
        enum:
          - solved
          - partially solved
          - unclear
          - unsolved
    testConducted:
        type: string
        enum:
          - Panel
          - Exome
          - Genome
          - array
    selektivvertrag:
        type: string
        enum: 
          - ja
          - beantragt
          - nein
    diseaseCategory:
        type: string
        enum:
          - neurodevelopmental
          - neurological/neuromuscular
          - organ abnormality
          - haematopoiesis/immune system
          - endocrine
          - metabolic
          - mitochondrial nutritional
          - cardiovascular
          - other
    referringClinician:
        type: string
    bisherigeDiagnostik:
        type: string
    wetlabMetainfo:
        type: string
    AutoCasc:
        type: string
    prenatal:
        type: integer
    ageInMonths:
        type: decimal
    ageinYears:
        type: decimal
    autozygosity:
        type: decimal
        # todo: range
    dateOfBirth:
        type: date
    startDerDiagnostik:
        type: date
    befunddatum:
        type: date
    variants:
      - gene:
            type: string
            required: true
        variantSolvesCase:
            type: string
            required: true
            enum:
              - primary
              - incidental
              - candidate
        ifNewDiseaseGeneLevelOfEvidence:
            type: string
            required: true
        acmg:
            class:
                type: string
                required: true
                enum:
                  - pathogenic
                  - likely pathogenic
                  - unclear
                  - likely benign
                  - benign
            criteria:
              - type: string
                enum:
                  - PVS1
                  - PS1
                  - PS2
                  - PS3
                  - PS4
                  - PM1
                  - PM2
                  - PM3
                  - PM4
                  - PM5
                  - PM6
                  - PP1
                  - PP2
                  - PP3
                  - PP4
                  - PP5
                  - BA1
                  - BS1
                  - BS2
                  - BS3
                  - BS4
                  - BP1
                  - BP2
                  - BP3
                  - BP4
                  - BP5
                  - BP6
                  - BP7
        zygosity:
            type: string
            required: true
            enum:
              - heterozygous
              - homozygous
              - comp het
              - hemi
              - homoplasmic
              - heteroplasmic
        segregationsanalyse:
            type: string
            required: true
            enum:
              - not performed
              - de novo
              - transmitted from father
              - transmitted from mother
        modeOfInheritance:
            type: string
            required: true
            enum:
              - dominant
              - recessive
              - X-linked
              - mitochondrial
              - unclear
        variant:
            reference:
                type: string
                ref: GRID_variants
                required: true
            transcript:
                type: string
layouts:
    default:
      - label: Identifikation
        type: 
            id: primary
        fields:
          - id: _id
            label: ID
            importTarget: false
          - id: sequencingLab
            label: Sequencing Lab
            majorField: true
            importTarget: false
            pinned: true
          - id: internalCaseId
            label: Internal Case ID
            majorField: true
            importTarget: true
            importMappingRequired: true
            pinned: true
      - label: Externe IDs
        type: 
            id: primary
        fields:
          - id: gestaltMatcherId
            label: GestaltMatcher ID
            majorField: true
            importTarget: true
          - id: externalCaseId
            label: External Case ID
            importTarget: true
          - id: face2GeneId
            label: Face2Gene ID
            importTarget: true
      - label: Patient
        type: 
            id: primary
        fields:
          - id: sex
            label: Sex
            majorField: true
            importTarget: true
          - id: ageInMonths
            label: Age (in months)
            majorField: true
            importTarget: true
          - id: ageinYears
            label: Age (in years)
            majorField: true
            importTarget: true
          - id: prenatal
            label: Prenatal
            importTarget: true
          - id: dateOfBirth
            label: Date of Birth
            importTarget: true
      - label: Diagnostik
        type: 
            id: primary
        fields:
          - id: startDerDiagnostik
            label: Start der Diagnostik
            majorField: true
            importTarget: true
          - id: befunddatum
            label: Befunddatum
            majorField: true
            importTarget: true
          - id: diseaseCategory
            label: Disease Category
            majorField: true
            importTarget: true
          - id: caseStatus
            label: Case Status
            majorField: true
            importTarget: true
          - id: hpoTerms
            label: HPO Terms
            importTarget: true
          - id: bisherigeDiagnostik
            label: Bisherige Diagnostik
            importTarget: true
          - id: singleDuoTrio
            label: Single / Duo / Trio
            importTarget: true
          - id: referringClinician
            label: Referring Clinician
            importTarget: true
          - id: autozygosity
            label: Autozygosity
            importTarget: true
          - id: testConducted
            label: Test Conducted
            importTarget: true
          - id: selektivvertrag
            label: Selectivvertrag
            importTarget: true
          - id: wetlabMetainfo
            label: Wetlab Metainfo
            importTarget: true
          - id: AutoCasc
            label: AutoCasc
            importTarget: true
      - label: Clinical Interpretation
        type: 
            id: nested
            rowExpansion: true
            root: variants
        fields:
          - id: gene
            label: Gene
            importTarget: true
          - id: variantSolvesCase
            label: Variant solves case
            importTarget: true
          - id: ifNewDiseaseGeneLevelOfEvidence
            label: Level of Evidence (for new disease genes)
            importTarget: true
          - id: acmgClass
            label: ACMG Class
            path: acmg.class
            importTarget: true
          - id: acmgCriteria
            label: ACMG Criteria
            path: acmg.criteria
            importTarget: true
          - id: zygosity
            label: Zygosity
            importTarget: true
          - id: segregationsanalyse
            label: Segregationsanalyse
            importTarget: true
          - id: modeOfInheritance
            label: Mode of Inheritance
            importTarget: true
#      - label: Variant
#        type: 
#            id: linked
#            rowExpansion: true
#            linkedScheme: GRID_variants

        


